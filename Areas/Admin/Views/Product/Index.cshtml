@model List<ProductGetVM>

<div class="container">
	<div class="row">
		<h2>Products</h2>
		<div>

			<a class="btn btn-success col-2 mt-3" asp-action="Create">Create</a>

		</div>
		<table class="table table-striped">
			<thead>
				<tr>
					<th scope="col">Id</th>
					<th scope="col">MainImage</th>
					<th scope="col">Name</th>
					<th scope="col">Description</th>
					<th scope="col">Price </th>
					<th scope="col">Category Name </th>
					<th scope="col">Actions</th>

				</tr>
			</thead>
			<tbody>
				@foreach (var product in Model)
				{
					<tr>
						<th scope="row">@product.Id</th>
						<td><img src="~/assets/images/website-images/@product.MainImageUrl" alt="Alternate Text" /></td>
						<td>@product.Name</td>
						<td>@product.Description</td>
						<td>@product.Price</td>
						<td>@product.CategoryName</td>
						<td>
							<a class="btn btn-warning" asp-action="Update" asp-route-id="@product.Id">Uptade</a>
							<a asp-action="Delete" asp-route-id="@product.Id" class="btn btn-danger deleteBtn">Delete</a>
						</td>
					</tr>
				}

			</tbody>
		</table>
	</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
	const deleteButton = document.querySelectorAll(".deleteBtn");
	deleteButton.forEach(btn => {
		btn.addEventListener('click', (e) => {
			e.preventDefault();
			Swal.fire({
				title: "Are you sure?",
				text: "You won't be able to revert this!",
				icon: "warning",
				showCancelButton: true,
				confirmButtonColor: "#3085d6",
				cancelButtonColor: "#d33",
				confirmButtonText: "Yes, delete it!"
			}).then((result) => {
				if (result.isConfirmed) {
					Swal.fire({
						title: "Deleted!",
						text: "Your file has been deleted.",
						icon: "success"
					});
					window.location.href = btn.href;
				}
			});
		})
	})
</script>